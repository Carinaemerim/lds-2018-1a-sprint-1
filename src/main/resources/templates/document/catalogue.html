<html layout:decorate="~{/layouts/main}">

<th:block layout:fragment="head-title">
    <title th:text="#{index.header}"/>
</th:block>

<!-- CONTENT HEADER -->
<div layout:fragment="content-header">
    <section class="content-header">
        <!-- PAGE TITLE -->
        <h1>
            <span th:text="#{index.header}"/>
            <small><span th:text="#{index.title}"/></small>
        </h1>
        <!-- BREADCRUMB -->
        <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i> <span
                    th:text="#{index.breadcrumb-1}"/></a></li>
            <li><a href="#"><span th:text="#{index.breadcrumb-2}"/></a></li>
            <li class="active"><span th:text="#{index.breadcrumb-3}"/></li>
        </ol>
    </section>
</div>



<div layout:fragment="content">

    <!-- Main content -->
    <section class="content">

        <!-- Default box -->
        <div class="box">
            <div class="box-header with-border">
                <h3 class="box-title">Catalogo</h3>

                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse">
                        <i class="fa fa-minus"></i>
                    </button>

                    <button type="button" class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove">
                        <i class="fa fa-times"></i>
                    </button>

                </div>
            </div>

            <div class="box-body">

                <form id="form-search" name="form-search">
                    <div class="form-group">
                        <div class="input-group input-group-sm">
                            <input type="text" class="form-control" id="criteria" name="criteria">
                            <span class="input-group-btn">
                          <button type="button" class="btn btn-info btn-flat" id="search-button">Go!</button>
                        </span>
                        </div>
                    </div>
                </form>



                <div class="form-group" th:fragment="search-results" id="search-results">
                    <th:block th:each="termPaper, iter : ${termPapers}">

                        <div class="panel box box-primary">
                            <div class="box-header with-border">
                                <h4 class="box-title">
                                    <a data-toggle="collapse" data-parent="#accordion" th:href="'#collapse'+ ${iter.index}" aria-expanded="false" class="collapsed">
                                        <span th:text="${termPaper.title}"></span>
                                    </a>
                                </h4>
                            </div>


                            <div th:id="'collapse'+ ${iter.index}" class="panel-collapse collapse" aria-expanded="false" style="height: 0px;">
                                <div class="box-body">
                                    <dl class="dl-horizontal">
                                        <dt>Autor</dt>
                                        <dd><span th:text="${termPaper.author.name}"></span></dd>
                                        <dt>Orientador</dt>
                                        <dd><span th:text="${termPaper.advisor.name}"></span></dd>
                                        <dt>Curso</dt>
                                        <dd>Etiam porta sem malesuada magna mollis euismod.</dd>
                                        <dt>Ano</dt>
                                        <dd>Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo
                                            sit amet risus.
                                        </dd>
                                    </dl>
                                </div>
                            </div>
                        </div>

                    </th:block>

                </div>

            </div>
            <!-- /.box-body -->
            <div class="box-footer">
                Footer
            </div>
            <!-- /.box-footer-->
        </div>
        <!-- /.box -->

    </section>

</div>


<th:block layout:fragment="js-view">
    <script>
        $("#search-button").click(function(e) {
            e.preventDefault();
            $.ajax({
                type: "POST",
                url: "/catalogue/search/",
                data: $("#form-search").serialize(),
                success : function(data, textStatus, jqXHR) {
                    $('#search-results').replaceWith(data);
                },
                error: function(result) {
                    alert('error');
                }
            });
        });

    </script>

</th:block>